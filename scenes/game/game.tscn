[gd_scene load_steps=23 format=3 uid="uid://choxo4xrftp41"]

[ext_resource type="PackedScene" uid="uid://clc5dre31iskm" path="res://addons/godot-xr-tools/xr/start_xr.tscn" id="1_k2tfa"]
[ext_resource type="Script" path="res://scenes/game/game.gd" id="1_p6tfs"]
[ext_resource type="Script" path="res://entities/note/scripts/note_spawner.gd" id="2_hafj4"]
[ext_resource type="PackedScene" uid="uid://b3wtmxh8rq4v6" path="res://entities/player/player.tscn" id="2_l0gkx"]
[ext_resource type="PackedScene" uid="uid://d0b50g3sqry4v" path="res://entities/maps/water_map/realistic_water.tscn" id="2_xcxhj"]
[ext_resource type="PackedScene" uid="uid://thge0ydknof1" path="res://entities/maps/water_map/platform.tscn" id="3_g4hpm"]
[ext_resource type="Script" path="res://entities/note/scripts/note_group.gd" id="3_nuc7l"]
[ext_resource type="Script" path="res://entities/note/scripts/note_data.gd" id="4_kp8mr"]
[ext_resource type="AudioStream" uid="uid://segagvvmmwkn" path="res://scenes/game/NeuroBeats.mp3" id="6_lblwx"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_mykrl"]
sky_top_color = Color(0.0696006, 0.271274, 0.421728, 1)
sky_horizon_color = Color(0.740822, 0.508206, 0.410935, 1)
sky_curve = 0.289781
ground_horizon_color = Color(0.64625, 0.65575, 0.67075, 1)

[sub_resource type="Sky" id="Sky_sm072"]
sky_material = SubResource("ProceduralSkyMaterial_mykrl")

[sub_resource type="Environment" id="Environment_5j4s0"]
background_mode = 2
sky = SubResource("Sky_sm072")
tonemap_mode = 2
glow_enabled = true

[sub_resource type="Resource" id="Resource_0fjs4"]
script = ExtResource("4_kp8mr")
line_index = 0
line_layer = 0
hit_type = 0
cut_direction = 1

[sub_resource type="Resource" id="Resource_nuacx"]
script = ExtResource("3_nuc7l")
weight = 10
notes = Array[ExtResource("4_kp8mr")]([SubResource("Resource_0fjs4")])

[sub_resource type="Resource" id="Resource_87rkv"]
script = ExtResource("4_kp8mr")
line_index = 3
line_layer = 0
hit_type = 1
cut_direction = 1

[sub_resource type="Resource" id="Resource_0m7em"]
script = ExtResource("3_nuc7l")
weight = 10
notes = Array[ExtResource("4_kp8mr")]([SubResource("Resource_87rkv")])

[sub_resource type="Resource" id="Resource_imycv"]
script = ExtResource("4_kp8mr")
line_index = 1
line_layer = 0
hit_type = 0
cut_direction = 1

[sub_resource type="Resource" id="Resource_tvoih"]
script = ExtResource("4_kp8mr")
line_index = 2
line_layer = 0
hit_type = 1
cut_direction = 1

[sub_resource type="Resource" id="Resource_mro33"]
script = ExtResource("3_nuc7l")
weight = 8
notes = Array[ExtResource("4_kp8mr")]([SubResource("Resource_imycv"), SubResource("Resource_tvoih")])

[sub_resource type="Resource" id="Resource_3j3tf"]
script = ExtResource("4_kp8mr")
line_index = 0
line_layer = 0
hit_type = 0
cut_direction = 1

[sub_resource type="Resource" id="Resource_w7twe"]
script = ExtResource("4_kp8mr")
line_index = 3
line_layer = 0
hit_type = 1
cut_direction = 1

[sub_resource type="Resource" id="Resource_b76ms"]
script = ExtResource("3_nuc7l")
weight = 3
notes = Array[ExtResource("4_kp8mr")]([SubResource("Resource_3j3tf"), SubResource("Resource_w7twe")])

[node name="Game" type="Node3D"]
script = ExtResource("1_p6tfs")

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_5j4s0")

[node name="RealisticWater" parent="WorldEnvironment" instance=ExtResource("2_xcxhj")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.00382972, -0.00349212, 0.00104284)

[node name="Platform" parent="WorldEnvironment" instance=ExtResource("3_g4hpm")]

[node name="StartXR" parent="." instance=ExtResource("1_k2tfa")]
enable_passthrough = true

[node name="NoteSpawner" type="Node" parent="."]
script = ExtResource("2_hafj4")
note_groups = Array[ExtResource("3_nuc7l")]([SubResource("Resource_nuacx"), SubResource("Resource_0m7em"), SubResource("Resource_mro33"), SubResource("Resource_b76ms")])

[node name="GameTimer" type="Timer" parent="."]
process_callback = 0

[node name="MusicPlayer" type="AudioStreamPlayer" parent="."]
stream = ExtResource("6_lblwx")
parameters/looping = true

[node name="Player" parent="." instance=ExtResource("2_l0gkx")]

[connection signal="xr_ended" from="StartXR" to="Player" method="_on_start_xr_xr_ended"]
[connection signal="xr_started" from="StartXR" to="Player" method="_on_start_xr_xr_started"]
[connection signal="timeout" from="GameTimer" to="." method="_on_game_timer_timeout"]
